<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>The C++ Binding</TITLE>
<META NAME="description" CONTENT="The C++ Binding">
<META NAME="keywords" CONTENT="Overview">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="Overview.css">

<LINK REL="next" HREF="node10.html">
<LINK REL="previous" HREF="node8.html">
<LINK REL="up" HREF="node2.html">
<LINK REL="next" HREF="node10.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html186"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html182"
  HREF="node2.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html176"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html184"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html187"
  HREF="node10.html">The Java Binding</A>
<B> Up:</B> <A NAME="tex2html183"
  HREF="node2.html">Overview</A>
<B> Previous:</B> <A NAME="tex2html177"
  HREF="node8.html">The Object Query Language</A>
 &nbsp; <B>  <A NAME="tex2html185"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html188"
  HREF="node9.html#SECTION00271000000000000000">Transient and Persistent Objects</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00270000000000000000">
The C++ Binding</A>
</H1>
The C++ binding maps the E<SMALL>YE</SMALL>DB object model into C++ by introducing
a generic API and a tool to generate a specific C++ API from
a given schema, built upon the generic API.

<BR>
<BR>
Each class in the E<SMALL>YE</SMALL>DB object model is implemented as a C++
class within the C++ API: there is a one-to-one mapping between
the object model and the C++ API.

<P>

<H2><A NAME="SECTION00271000000000000000">
Transient and Persistent Objects</A>
</H2>
There are two types of runtime objects: persistent runtime objects and
transient runtime objects.

<BR>
A runtime object is persistent if it is tied to a database object.
Otherwise, it is  transient.

<BR>
<BR>
By default, E<SMALL>YE</SMALL>DB does not
provide an automatic synchronisation between persistent runtime objects
and database objects.

<BR>
When setting values on a persistent runtime object, we do not modify
the tied database object.
One must call the <TT>store</TT> method on the persistent runtime object
to update the tied database object.

<BR>
<BR>
Note that any persistent runtime object manipulation must be done
in the scope of a transaction.

<BR>
<BR>
To illustrate object manipulations, we introduce a simple concrete
example using the schema-oriented C++ API, based on the previous ODL
example construct:

<PRE>
 // connecting to the EyeDB server
 eyedb::Connection conn;
 conn.open();

 // opening database dbname
 personDatabase db(dbname);
 db.open(&amp;conn, eyedb::Database::DBRW);

 // beginning a transaction
 db.transactionBegin();

 // creating a Person
 Person *p = new Person(&amp;db);

 // setting attribute values
 p-&gt;setCstate(Sir);
 p-&gt;setName(name);
 p-&gt;setAge(age);

 p-&gt;getAddr()-&gt;setStreet("voltaire");
 p-&gt;getAddr()-&gt;setTown("paris");

 // creating two cars
 Car *car1 = new Car(&amp;db);
 car1-&gt;setBrand("renault");
 car1-&gt;setNum(18374);

 Car *car2 = new Car(&amp;db);
 car2-&gt;setBrand("ford");
 car2-&gt;setNum(233491);

 // adding the cars to the created person
 p-&gt;addToCarsColl(car1);
 p-&gt;addToCarsColl(car2);

 // storing all in database
 p-&gt;store(eyedb::RecMode::FullRecurs);

 // committing the transaction
 db.transactionCommit();
</PRE>
A few remarks about this code:

<OL>
<LI>the statement <TT>Person *p = new Person(&amp;db)</TT> creates a
transient runtime object. This runtime object is not tied to any
database object until the <TT>store</TT> method has been called.
</LI>
<LI>all the selector and modifier methods such as <TT>setName</TT>,
<TT>getAddr</TT>, <TT>addToCarsColl</TT> have been generated by the E<SMALL>YE</SMALL>DB 
ODL compiler from the previous ODL construct.
</LI>
<LI>the <TT>eyedb::RecMode::FullRecurs</TT> argument to the <TT>store</TT>
method allows the user for storing each object related the calling instance:
so the runtime object <TT>car1</TT> and <TT>car2</TT> within the <TT>cars</TT>
collection will be automatically stored using the <TT>store</TT> method
with this argument.
</LI>
<LI>the call to <TT>transactionCommit</TT> ensures that the database changes
will be kept in the database.
</LI>
</OL>
<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html186"
  HREF="node10.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html182"
  HREF="node2.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html176"
  HREF="node8.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html184"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html187"
  HREF="node10.html">The Java Binding</A>
<B> Up:</B> <A NAME="tex2html183"
  HREF="node2.html">Overview</A>
<B> Previous:</B> <A NAME="tex2html177"
  HREF="node8.html">The Object Query Language</A>
 &nbsp; <B>  <A NAME="tex2html185"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
EyeDB manual
</ADDRESS>
</BODY>
</HTML>
