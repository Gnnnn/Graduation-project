<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Chapter 6. Database tuning</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.1"><link rel="home" href="index.html" title="EyeDB Administration Guide"><link rel="up" href="index.html" title="EyeDB Administration Guide"><link rel="prev" href="ch05s03.html" title="Managing dataspaces"><link rel="next" href="ch06s02.html" title="Managing indexes"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 6. Database tuning</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch05s03.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch06s02.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 6. Database tuning"><div class="titlepage"><div><div><h2 class="title"><a name="database-tuning"></a>Chapter 6. Database tuning</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="ch06.html#id566152">Creating large databases</a></span></dt><dd><dl><dt><span class="section"><a href="ch06.html#id536872">Databases limits</a></span></dt><dt><span class="section"><a href="ch06.html#id530453">Tuning the host system</a></span></dt><dt><span class="section"><a href="ch06.html#id538539">Creating multi-volumes databases using datafiles and dataspaces</a></span></dt></dl></dd><dt><span class="section"><a href="ch06s02.html">Managing indexes</a></span></dt><dd><dl><dt><span class="section"><a href="ch06s02.html#id564424">Creating and deleting indexes</a></span></dt><dt><span class="section"><a href="ch06s02.html#id576694">Listing, updating and moving indexes</a></span></dt><dt><span class="section"><a href="ch06s02.html#id576889">Getting statistics on indexes</a></span></dt><dt><span class="section"><a href="ch06s02.html#id577172">Getting and setting index default dataspace</a></span></dt></dl></dd><dt><span class="section"><a href="ch06s03.html">Managing collections</a></span></dt><dd><dl><dt><span class="section"><a href="ch06s03.html#id577549">EyeDB collection implementations</a></span></dt><dt><span class="section"><a href="ch06s03.html#id577673">Getting and setting collection default implementation</a></span></dt><dt><span class="section"><a href="ch06s03.html#id577723">Getting and updating a particular collection implementation</a></span></dt><dt><span class="section"><a href="ch06s03.html#id577735">Getting statistics on a collection implementation</a></span></dt><dt><span class="section"><a href="ch06s03.html#id577746">Getting and setting collection default dataspace</a></span></dt></dl></dd><dt><span class="section"><a href="ch06s04.html">Managing locations</a></span></dt><dd><dl><dt><span class="section"><a href="ch06s04.html#id577767">What is a location in EyeDB?</a></span></dt><dt><span class="section"><a href="ch06s04.html#id577778">Managing instances locations</a></span></dt><dt><span class="section"><a href="ch06s04.html#id577790">Managing attributes locations</a></span></dt><dt><span class="section"><a href="ch06s04.html#id577801">Managing collections locations</a></span></dt><dt><span class="section"><a href="ch06s04.html#id577812">Managing indexes locations</a></span></dt></dl></dd></dl></div><p>
      This chapter explains how to tune EyeDB to improve performance, either system response time or databases size.
    </p><p>
      The first section describes how to build multi-volumes databases
      that can contain hundred of terabytes of data. The two following
      sections explains how to manage indexes and collections to improve
      system response time. The last section describes how to specify a
      location (i.e. a dataspace) for EyeDB entities such as class
      instances, collections...
    </p><div class="section" title="Creating large databases"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id566152"></a>Creating large databases</h2></div></div></div><p>
	Creating large databases (i.e. larger than a terabyte) requires partitionning the database between several volumes, either physical disks or partitions of a disk. EyeDB supports multi-volumes databases using datafiles (see <a class="xref" href="ch05s02.html" title="Managing datafiles">the section called “Managing datafiles”</a>) and dataspaces (see <a class="xref" href="ch05s03.html" title="Managing dataspaces">the section called “Managing dataspaces”</a>).
      </p><div class="section" title="Databases limits"><div class="titlepage"><div><div><h3 class="title"><a name="id536872"></a>Databases limits</h3></div></div></div><p>
	</p></div><div class="section" title="Tuning the host system"><div class="titlepage"><div><div><h3 class="title"><a name="id530453"></a>Tuning the host system</h3></div></div></div><p>
	  An important notice is that the host system imposes to the processes running on it some resource limits, in particular on process memory size and process virtual memory size. As EyeDB file access relies heavily on virtual memory and file mapping, it is mandatory to either unset these limits or set them to a high value.
	</p><p>
	  On Linux, the resource limits can be retrieved and set using functions <code class="function">getrlimit</code> and <code class="function">setrlimit</code>, that can be used from a C or C++ program. For a further description of these functions, consult the <span class="citerefentry"><span class="refentrytitle">getrlimit</span>(2)</span> and <span class="citerefentry"><span class="refentrytitle">setrlimit</span>(2)</span> manual pages.
	</p><p>
	  When using command line tools, an easy way to retrieve and set resource limits is to use the bash <span class="command"><strong>ulimit</strong></span> command. For a further description of this command, consult the <span class="citerefentry"><span class="refentrytitle">bash</span>(1)</span> manual page.
	</p><p>
	  The two mandatory resource limits that must be set are:
	  </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>the maximum memory size, which can be retrieved using command <span class="command"><strong>ulimit -m</strong></span> </p></li><li class="listitem"><p>the maximum virtual memory size, which can be retrieved using command <span class="command"><strong>ulimit -v</strong></span></p></li></ul></div><p>
	</p><div class="example"><a name="ulimit"></a><p class="title"><b>Example 6.1. Retrieving and setting resource limits using <span class="command">ulimit</span></b></p><div class="example-contents"><pre class="screen">
<strong class="userinput"><code>ulimit -m</code></strong>
1024
<strong class="userinput"><code>ulimit -m unlimited</code></strong>
<strong class="userinput"><code>ulimit -m</code></strong>
unlimited
<strong class="userinput"><code>ulimit -v</code></strong>
8192
<strong class="userinput"><code>ulimit -v unlimited</code></strong>
<strong class="userinput"><code>ulimit -v</code></strong>
unlimited
	  </pre></div></div><br class="example-break"></div><div class="section" title="Creating multi-volumes databases using datafiles and dataspaces"><div class="titlepage"><div><div><h3 class="title"><a name="id538539"></a>Creating multi-volumes databases using datafiles and dataspaces</h3></div></div></div><p>
	</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch05s03.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch06s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Managing dataspaces </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Managing indexes</td></tr></table></div></body></html>
