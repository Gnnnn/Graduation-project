<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>The Storage Manager Subsystem</TITLE>
<META NAME="description" CONTENT="The Storage Manager Subsystem">
<META NAME="keywords" CONTENT="Overview">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="Overview.css">

<LINK REL="next" HREF="node6.html">
<LINK REL="previous" HREF="node4.html">
<LINK REL="up" HREF="node2.html">
<LINK REL="next" HREF="node6.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html127"
  HREF="node6.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html123"
  HREF="node2.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html117"
  HREF="node4.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html125"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html128"
  HREF="node6.html">The Object Model</A>
<B> Up:</B> <A NAME="tex2html124"
  HREF="node2.html">Overview</A>
<B> Previous:</B> <A NAME="tex2html118"
  HREF="node4.html">The Architecture</A>
 &nbsp; <B>  <A NAME="tex2html126"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html129"
  HREF="node5.html#SECTION00231000000000000000">Raw Data Management</A>
<LI><A NAME="tex2html130"
  HREF="node5.html#SECTION00232000000000000000">Memory Mapped Architecture</A>
<LI><A NAME="tex2html131"
  HREF="node5.html#SECTION00233000000000000000">Transactional Services</A>
<LI><A NAME="tex2html132"
  HREF="node5.html#SECTION00234000000000000000">The Recovery System</A>
<LI><A NAME="tex2html133"
  HREF="node5.html#SECTION00235000000000000000">B-Tree and Hash Indexes</A>
<LI><A NAME="tex2html134"
  HREF="node5.html#SECTION00236000000000000000">Multi-Volume Database Management</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION00230000000000000000">
The Storage Manager Subsystem</A>
</H1>
E<SMALL>YE</SMALL>DB is based on a client/server architecture.
The server kernel is the storage manager subsystem providing the
<BR>
following main services:
<BR> - persistent raw data management,
<BR> - transactional services,
<BR> - recovery system,
<BR> - B-tree and hash indexes,
<BR> - multi-volume database management.
<BR>
<BR>
The storage manager can be used independently from E<SMALL>YE</SMALL>DB.

<P>

<H2><A NAME="SECTION00231000000000000000">
Raw Data Management</A>
</H2>
The central concept of the storage manager is the raw object.
A raw object is a piece of persistent raw data tied to an object identifier
named <SPAN  CLASS="textit">oid</SPAN> .

<BR>
An <SPAN  CLASS="textit">oid</SPAN> identifies a raw object in a unique way within a set of databases.
It is
generated by the storage manager at raw object creation.

<BR>
An <SPAN  CLASS="textit">oid</SPAN> is composed of three fields: the storage index, the database identifier
and a random generated magic number.

<BR>
The first field identifies the object physical location
within a database volume.
The second one identifies a database and the last one ensures more
security in the object identification process.

<BR>
<BR>
The storage manager is responsible for the management of raw objects:

<UL>
<LI>raw object creation (<SPAN  CLASS="textit">storage allocation, oid allocation,
 object storage</SPAN>),
</LI>
<LI>raw object update (<SPAN  CLASS="textit">contents modification</SPAN>),
</LI>
<LI>raw object reading,
</LI>
<LI>raw object deleting (<SPAN  CLASS="textit">oid deallocation,  storage deallocation</SPAN>),
</LI>
<LI>raw object resizing (<SPAN  CLASS="textit">storage reallocation, 
object moving</SPAN>),
</LI>
<LI>raw object locking and unlocking (<SPAN  CLASS="textit">share locking, exclusive locking, private locking</SPAN>),
</LI>
<LI>raw object access control
</LI>
</UL>

<P>

<H2><A NAME="SECTION00232000000000000000">
Memory Mapped Architecture</A>
</H2>
The storage manager is based on a memory mapped architecture. Database
volumes are mapped within the server virtual memory space.

<BR>
Due to some 32-bit system limitations, the databases greater than 2Gb cannot
be mapped as a whole.

<BR>
<BR>
The storage manager implements a segment-based mapping algorithm:
when reading an object, the storage manager checks if the
corresponding storage piece is mapped within its virtual memory space. If it is
not mapped, it maps a large segment of data around the raw object,
eventually extending a neighboring segment.

<BR>
If the total mapped size is more than the system maximum, it
unmaps the less recent used mapped segment.
On 64-bit system, this algorithm is not needed as databases up to
several Tb (i.e. tera-bytes) can be mapped at whole within the virtual
 memory space.

<BR>
Currently, the storage manager can deal with databases up to one
Tb.

<H2><A NAME="SECTION00233000000000000000">
Transactional Services</A>
</H2>
  The storage manager provides standard transaction services which
  guarantees atomicity,  consistency, isolation and integrity within
  a database.

<BR>
Its transaction unit is based on a two-phase locking protocol.
  The protocol requires that each transaction issues lock and unlock requests
  in two phases:

<UL>
<LI>growing phase: a transaction may obtain locks but may not release
any lock.
</LI>
<LI>shrinking phase: a transaction may release locks but may not obtain
any new lock.
</LI>
</UL>
Initially, a transaction is in the growing phase. The transaction acquires
locks as needed. Once the transaction releases a lock, it enters the
shrinking phase and no more lock requests may be issued.

<BR>
<BR>
The storage manager provides different transaction locking modes:
read and write shared,
read shared and write exclusive, read and write exclusive or
database exclusive.

<BR>
It provides immediate deadlock detection.

<H2><A NAME="SECTION00234000000000000000">
The Recovery System</A>
</H2>
The storage manager provides a simple but efficient recovery system against
failures:

<UL>
<LI>client failure: the transaction is automatically aborted by the server.
</LI>
<LI>server failure or operating system failure: the current transactions
  will be automatically aborted on the next database opening.
</LI>
<LI>the disk failure recovery is not supported: this is a deliberate
choice of simplicity since storage consistency
can rely on the RAID technology or transactional file systems now available
on modern operating systems.
</LI>
</UL>

<P>

<H2><A NAME="SECTION00235000000000000000">
B-Tree and Hash Indexes</A>
</H2>
The storage manager provides support for B-Tree and Hash indexes.

<BR>
The B-Tree index provides fixed size raw data indexation,
efficient exact match query and range query.

<BR>
The Hash index provides variable size raw data indexation
and efficient exact match query. The hash key function can
be provided by the client.

<P>

<H2><A NAME="SECTION00236000000000000000">
Multi-Volume Database Management</A>
</H2>
The database storage unit is the volume files. A database can contains
up to 512 volumes each one up to 2Gb on a 32-bit file system interface,
or up to several tera-bytes on a 64-bit file system interface.
The storage manager provides facilities to add, move, resize and reorganize
database volumes.

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html127"
  HREF="node6.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html123"
  HREF="node2.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html117"
  HREF="node4.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html125"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html128"
  HREF="node6.html">The Object Model</A>
<B> Up:</B> <A NAME="tex2html124"
  HREF="node2.html">Overview</A>
<B> Previous:</B> <A NAME="tex2html118"
  HREF="node4.html">The Architecture</A>
 &nbsp; <B>  <A NAME="tex2html126"
  HREF="node1.html">Contents</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
EyeDB manual
</ADDRESS>
</BODY>
</HTML>
